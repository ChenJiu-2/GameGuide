<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>其他活动 - 叫我万岁爷攻略站</title>
  <script src="https://cdn.jsdelivr.net/npm/opencc-js/dist/umd/full.min.js"></script>
  <script src="../lang.js"></script>
  <script src="../calculator.js"></script>

  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: "Microsoft YaHei", Arial, sans-serif;
      line-height: 1.6;
    }

    body {
      background: url("../background.jpg") no-repeat center center fixed;
      background-size: cover;
      position: relative;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    body::before {
      content: "";
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(255,255,255,0.5);
      z-index: -1;
    }

    /* Header */
    header {
      position: sticky;
      top: 0;
      z-index: 100;
      flex-shrink: 0;
      background: darkgoldenrod;
      color: white;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 20px;
      height: 60px;
    }
    header h1 {
      margin: 0;
      font-size: 1.5em;
    }
    .menu {
      display: flex;
      gap: 20px;
      align-items: center;
    }
    .menu a, .menu button {
      color: white;
      text-decoration: none;
      font-size: 1em;
      background: none;
      border: none;
      cursor: pointer;
      padding: 6px 10px;
      border-radius: 4px;
      transition: background 0.3s;
    }
    .menu a:hover, .menu button:hover {
      background: goldenrod;
    }

    /* 内容区 */
    .content {
      flex: 1;
      max-width: 1000px;
      margin: 0 auto;
      padding: 20px;
      width: 100%;
    }

    .page-title {
      color: darkgoldenrod;
      font-size: 2em;
      margin-bottom: 15px;
      text-align: center;
    }

    /* 本页导航 */
    .sub-menu {
      margin-bottom: 20px;
    }
    .sub-menu ul {
      list-style-type: disc;
      padding-left: 40px;
    }
    .sub-menu a {
      text-decoration: none;
      color: darkgoldenrod;
      font-weight: bold;
      transition: background 0.3s;
    }
    .sub-menu a:hover {
      background: #e0c0ff;
    }

    /* Section 框 */
    .section-box {
      background: rgba(255,255,255,0.9);
      padding: 15px 20px;
      margin-bottom: 20px;
      border-radius: 10px;
      border: 1px solid #ccc;
    }
    .section-box h2 {
      margin-top: 0;
      color: darkgoldenrod;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      text-align: center;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 8px;
    }
    th {
      background-color: #dcdcdc;
    }

   #calculator {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 1em;
    }
    /* --- 阶段区的布局 --- */
  .stage-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1em;
    margin-bottom: 1em;
  }
  
  /* 单个阶段盒子 */
  .stage-box {
    border: 1px solid #ccc;
    border-radius: 12px;
    padding: 0.8em;
    background-color: #fafafa;
    transition: box-shadow 0.2s;
  }
  .stage-box:hover {
    box-shadow: 0 0 8px rgba(0,0,0,0.15);
  }
  
  /* 标题和输入框细节 */
  .stage-box h3 {
    margin-top: 0;
    font-size: 1.1em;
    border-bottom: 1px solid #ddd;
    padding-bottom: 0.3em;
    color: darkgoldenrod;
  }
  .stage-box label {
    display: block;
    margin: 0.3em 0;
  }
  .stage-box input[type="number"] {
    width: 100%;
    max-width: 120px;
    margin-top: 0.2em;
  }
    button#calc-btn {
      background-color: #4682b4;
      color: white;
      border: none;
      padding: 0.5em 1.5em;
      border-radius: 6px;
      cursor: pointer;
    }
    button#calc-btn:hover {
      background-color: #36648b;
    }

    /* Footer */
    footer {
      text-align: center;
      padding: 15px;
      background: #333;
      color: white;
      flex-shrink: 0;
    }

    #backToTop {
      position: fixed;
      bottom: 30px;       /* 离底部距离 */
      right: 30px;        /* 离右边距离 */
      background-color: #ccc;
      color: white;
      border: none;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      font-size: 30px;
      cursor: pointer;
      display: none;       /* 初始隐藏 */
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
      transition: background 0.3s, transform 0.2s;
    }
    #backToTop:hover {
      background-color: #555;
      transform: scale(1.1);
    }
    input[type="text"] {
      width: 100%;
      padding: 12px;
      font-size: 16px;
      border: 2px solid #ccc;
      border-radius: 8px;
      margin-bottom: 20px;
      box-sizing: border-box;
    }
    .result {
      background: #fff;
      padding: 16px;
      border-radius: 10px;
      margin-bottom: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .question {
      font-weight: bold;
      color: #222;
    }
    .answer {
      color: #007b5e;
      margin-top: 6px;
    }
  </style>
</head>
  
<body>

  <!-- 顶部 Header --> 
  <header>
    <a href="../index.html" class="translatable" style="color:white; text-decoration:none; font-size:1.5em; font-weight:bold;">
      叫我万岁爷攻略站
    </a>
    
    <div class="menu">
      <a href="development.html" class="translatable">游戏养成</a>
      <a href="cross-server.html" class="translatable">跨服活动</a>
      <a href="other.html" class="translatable">其他活动</a>
      <a href="topup.html" class="translatable">充值相关</a>
      <button onclick="toSimplified()">简</button>
      <span style="color:white;">|</span>
      <button onclick="toTraditional()">繁</button>
    </div>
  </header>

  <!-- 页面内容 -->
  <div class="content translatable">

    <!-- 页面标题 -->
    <div class="page-title translatable">其他活动</div>

    <!-- 本页导航 -->
    <nav class="sub-menu translatable">
      <ul>
        <li>
          <a href="#shechuan">涉川万路</a>
          <ul>
            <li><a href="#dati">答题库</a></li>
            <li><a href="#jiemi">解密机关</a></li>
            <li><a href="#bianren">辨认真伪</a></li>
          </ul>
        </li>
        <li><a href="#saiji">赛季积分</a></li>
        <li><a href="#wansui">万岁庆典</a></li>
      </ul>
    </nav>

    <!-- 各活动内容框 -->
    <!-- 来源：FB金銭銭 -->
    <div class="section-box" id="shechuan">
      <h2 class="translatable">涉川万路</h2>
      <div class="section-box" id="dati">
        <h2 class="translatable">答题库</h2>
        <input type="text" id="searchInput2" placeholder="输入题目或答案关键词...">
        <div id="search2"></div>
        <script>
          let data = [];
          let currentLang = localStorage.getItem('lang') || 'traditional';
        
          async function loadData() {
            const res = await fetch('../data/questions.json');
            data = await res.json();
          }
        
          async function init() {
            await loadData();
        
            const input = document.getElementById('searchInput2');
            const resultsDiv = document.getElementById('search2');
        
            // 建立繁简转换器
            const toSimplified = OpenCC.Converter({ from: 'tw', to: 'cn' });
            const toTraditional = OpenCC.Converter({ from: 'cn', to: 'tw' });
        
            input.addEventListener('input', () => {
              const keyword = input.value.trim();
              resultsDiv.innerHTML = '';
              if (keyword === '') return;
        
              // 双版本关键字
              const keyword_s = toSimplified(keyword);
              const keyword_t = toTraditional(keyword);
        
              // 搜索逻辑（繁简都能匹配）
              const filtered = data.filter(item => {
                const q = item.题目;
                const a = item.答案;
                return (
                  (q && (q.includes(keyword_s) || q.includes(keyword_t))) ||
                  (a && (a.includes(keyword_s) || a.includes(keyword_t)))
                );
              });
        
              if (filtered.length === 0) {
                resultsDiv.innerHTML =
                  currentLang === 'simplified'
                    ? '<p>没有找到相关题目。</p>'
                    : '<p>沒有找到相關題目。</p>';
              } else {
                filtered.forEach(item => {
                  const div = document.createElement('div');
                  div.classList.add('result');
        
                  // 根据用户当前语言输出
                  const question =
                    currentLang === 'simplified'
                      ? toSimplified(item.题目)
                      : toTraditional(item.题目);
                  const answer =
                    currentLang === 'simplified'
                      ? toSimplified(item.答案)
                      : toTraditional(item.答案);
        
                  div.innerHTML = `
                    <div class="question">${
                      currentLang === 'simplified' ? '题目' : '題目'
                    }：${question}</div>
                    <div class="answer">${
                      currentLang === 'simplified' ? '答案' : '答案'
                    }：${answer}</div>
                  `;
                  resultsDiv.appendChild(div);
                });
              }
            });
          }
        
          init();
        
          // ✅ 简繁切换按钮函数
          function toSimplified() {
            localStorage.setItem('lang', 'simplified');
            location.reload();
          }
        
          function toTraditional() {
            localStorage.setItem('lang', 'traditional');
            location.reload();
          }
        </script>
      </div>
      
      <div class="section-box" id="jiemi">
        <h2 class="translatable">解密机关</h2>
        <input type="text" id="searchInput" placeholder="输入题目或答案关键词...">
          <div id="search"></div>
      
          <script>
            let data = [];
            let currentLang = localStorage.getItem('lang') || 'traditional';
          
            async function loadData() {
              const res = await fetch('../data/puzzle.json');
              data = await res.json();
            }
          
            async function init() {
              await loadData();
          
              const input = document.getElementById('searchInput');
              const resultsDiv = document.getElementById('search');
          
              // 建立繁简转换器
              const toSimplified = OpenCC.Converter({ from: 'tw', to: 'cn' });
              const toTraditional = OpenCC.Converter({ from: 'cn', to: 'tw' });
          
              input.addEventListener('input', () => {
                const keyword = input.value.trim();
                resultsDiv.innerHTML = '';
                if (keyword === '') return;
          
                // 同时创建简体和繁体关键词
                const keyword_s = toSimplified(keyword);
                const keyword_t = toTraditional(keyword);
          
                // 搜索逻辑（支持多答案字段）
                const filtered = data.filter(item => {
                  const q = item.题目 || '';
                  const answers = [item.答案1, item.答案2, item.答案3, item.答案4]
                    .filter(a => a && a.trim() !== '')
                    .join(' ');
                  return (
                    q.includes(keyword_s) ||
                    q.includes(keyword_t) ||
                    answers.includes(keyword_s) ||
                    answers.includes(keyword_t)
                  );
                });
          
                if (filtered.length === 0) {
                  resultsDiv.innerHTML =
                    currentLang === 'simplified'
                      ? '<p>没有找到相关题目。</p>'
                      : '<p>沒有找到相關題目。</p>';
                } else {
                  filtered.forEach(item => {
                    const div = document.createElement('div');
                    div.classList.add('result');
          
                    // 根据语言转换题目
                    const question =
                      currentLang === 'simplified'
                        ? toSimplified(item.题目)
                        : toTraditional(item.题目);
          
                    // 筛出有效答案 + 繁简转换
                    const answers = [item.答案1, item.答案2, item.答案3, item.答案4]
                      .filter(a => a && a.trim() !== '')
                      .map(a =>
                        currentLang === 'simplified' ? toSimplified(a) : toTraditional(a)
                      );
          
                    // 拼接答案HTML
                    let answerHTML = '';
                    answers.forEach((ans, i) => {
                      answerHTML += `<div class="answer">${
                        currentLang === 'simplified' ? '答案' : '答案'
                      } ${i + 1}：${ans}</div>`;
                    });
          
                    div.innerHTML = `
                      <div class="question">${
                        currentLang === 'simplified' ? '题目' : '題目'
                      }：${question}</div>
                      ${answerHTML}
                    `;
                    resultsDiv.appendChild(div);
                  });
                }
              });
            }
          
            init();
          
            // 语言切换按钮函数
            function toSimplified() {
              localStorage.setItem('lang', 'simplified');
              location.reload();
            }
          
            function toTraditional() {
              localStorage.setItem('lang', 'traditional');
              location.reload();
            }
          </script> 
        </div>
      <div class="section-box" id="bianren">
        <h2 class="translatable">辨认真伪</h2></div>
    </div>

    <div class="section-box" id="saiji">
      <h2 class="translatable">赛季积分</h2>
      
      <form id="calculator">
        
        <!-- 第一阶段 -->
        <div class="stage-box">
          <h3>第一阶段</h3>
          <label>跨服荐函：<input type="number" id="jianhan" placeholder="荐函数量"></label>
          <label>青瓷御品：<input type="number" id="qingci" placeholder="体力"></label>
          <label>健锐演兵：<input type="number" id="jianrui" placeholder="积分"></label>
          <label>满汉全席：<input type="number" id="manhan" placeholder="积分"></label>
        </div>
        
        <!-- 第二阶段 -->
        <div class="stage-box">
          <h3>第二阶段</h3>
          <label>皇子修学：<input type="number" id="xiuxue" placeholder="经验"></label>
          <label>钲鼓连烽：<input type="number" id="zhenggu" placeholder="战功"></label>
          <label>攻城掠地：<input type="number" id="gongchengld" placeholder="体力"></label>
          <label>银台对雪：<input type="number" id="yintai" placeholder="积分"></label>
        </div>
    
        <!-- 第三阶段 -->
        <div class="stage-box">
          <h3>第三阶段</h3>
          <label>跨服亲密：<input type="number" id="qinmi" placeholder="亲密点"></label>
          <label>九歌逸潭：<input type="number" id="jiuge" placeholder="积分"></label>
          <label>如意赠佳人：<input type="number" id="ruyi" placeholder="积分"></label>
        </div>
    
        <!-- 第四阶段 -->
        <div class="stage-box">
          <h3>第四阶段</h3>
          <label>跨服悟性：<input type="number" id="wuxing" placeholder="悟性"></label>
          <label>威巡四海：<input type="number" id="weixun" placeholder="体力"></label>
          <label>排兵演阵：<input type="number" id="paibing" placeholder="体力"></label>
        </div>
    
        <!-- 第五阶段 -->
        <div class="stage-box">
          <h3>第五阶段</h3>
          <label>跨服国力：<input type="number" id="guoli" placeholder="资质果"></label>
          <label>棋逢对手：<input type="number" id="qifeng" placeholder="体力"></label>
          <label>联盟寻宝：<input type="number" id="xunbao" placeholder="体力"></label>
        </div>

        <!-- 第六阶段 -->
        <div class="stage-box">
          <h3>第六阶段</h3>
          <label>跨服奇珍：<input type="number" id="qizhen" placeholder="奇珍"></label>
          <label>逐鹿楼兰：<input type="number" id="qifeng" placeholder="体力"></label>
          <label>宫廷蹴鞠：<input type="number" id="cuju" placeholder="贡献值"></label>
        </div>

        <!-- 第七阶段 -->
        <div class="stage-box">
          <h3>第七阶段</h3>
          <label>声威争霸：<input type="number" id="shengwei" placeholder="声威"></label>
          <label>舌战群儒：<input type="number" id="shezhan" placeholder="静心丸"></label>
          <label>那达慕：<input type="number" id="nadamu" placeholder="体力"></label>
          <label>九龙窃闻：<input type="number" id="jiulong" placeholder="神捕令"></label>
          <label>风鸢绘梦：<input type="number" id="fengyuan" placeholder="体力"></label>
        </div>

        <!-- 第八阶段 -->
        <div class="stage-box">
          <h3>第八阶段</h3>
          <label>残简争霸：<input type="number" id="canjian" placeholder="祝纹残简"></label>
          <label>跨服攻城战：<input type="number" id="gongchengz" placeholder="体力"></label>
          <label>蓬莱仙岛：<input type="number" id="penglai" placeholder="体力"></label>
          <label>千机迷云：<input type="number" id="qianji" placeholder="积分"></label>
        </div>

        <!-- 第九阶段 -->
        <div class="stage-box">
          <h3>第九阶段</h3>
          <label>跨服悟性2：<input type="number" id="wuxing2" placeholder="悟性"></label>
          <label>梨园溯隐：<input type="number" id="liyuan" placeholder="体力"></label>
          <label>帝寻龙珀：<input type="number" id="dixun" placeholder="体力"></label>
        </div>

        <!-- 第十阶段 -->
        <div class="stage-box">
          <h3>第十阶段</h3>
          <label>名臣翊辅/贤才强国：<input type="number" id="mcxc" placeholder="资质果"></label>
          <label>羽境凌川：<input type="number" id="yujing" placeholder="体力"></label>
          <label>玄机搏阵：<input type="number" id="xuanji" placeholder="体力"></label>
        </div>

        <div id="calculator" class="translatable"></div>
        <!-- 计算按钮 -->
        <div style="margin-top: 1em;">
          <button type="button" id="calc-btn">计算总龙气</button>
        </div>

        <p>资源冲榜大概率不会变，但9点和10点的活动可能会改变，只需要在别的阶段寻找当前活动并输入即可</p>
        <p>因进位原因，实际获得的龙气会比计算的多一点</p>
  </form>

  <!-- 结果显示 -->
  <div id="result" style="margin-top: 1em; font-weight: bold;"></div>

  </div>

  <!-- 来源：贴吧言言 -->
    <div class="section-box" id="wansui">
      <h2 class="translatable">万岁庆典</h2>
      <p>建议根据阶段奖励使用龙珠，剩余龙珠可保留</p>
      <table class="translatable">
        <thead>
          <tr>
            <th>累积使用小龙珠（黄）次数</th>
            <th>阶段奖励</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>10</td><td>灵猫护符*1</td></tr>
          <tr><td>20</td><td>灵猫护符*1</td></tr>
          <tr><td>30</td><td>灵猫护符*1</td></tr>
          <tr><td>40</td><td>灵猫护符*1</td></tr>
          <tr><td>50</td><td>灵猫护符*1</td></tr>
          <tr><td>60</td><td>灵猫护符*1</td></tr>
          <tr><td>70</td><td>灵猫护符*2</td></tr>
          <tr><td>80</td><td>灵猫护符*2</td></tr>
          <tr><td>90</td><td>白虎护符*2</td></tr>
          <tr><td>100</td><td>狮王护符*2</td></tr>
        </tbody>
      </table>
      上限：100小龙珠
      
      <table class="translatable">
        <thead>
          <tr>
            <th>累积使用真龙龙珠（红）次数</th>
            <th>阶段奖励</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>20-200（每20个）</td><td>万万护符/白泽护符*1</td></tr>
          <tr><td>200-400（每40个）</td><td>万万护符/白泽护符*2</td></tr>
          <tr><td>400-800（每40个）</td><td>凤凰护符/金龙护符*1</td></tr>
          <tr><td>800-1000（每50个）</td><td>凤凰护符/金龙护符*2</td></tr>
          <tr><td>1000-2000（每200个）</td><td rowspan="3">万万护符/白泽护符*1 + 凤凰护符/金龙护符*1</td></tr>
          <tr><td>2000-3000（每250个）</td></tr>
          <tr><td>3000-3500</td></tr>
        </tbody>
      </table>
      上限：3500真龙龙珠

    </div>

  <!-- 底部 Footer -->
  <footer>
    <p class="translatable">© 2025 叫我万岁爷攻略站 | 非官方制作</p>
    <button id="backToTop" title="返回顶部">▲</button>
  </footer>

  <script>
  // 当页面滚动超过 300px 时显示按钮
  window.onscroll = function() {
    const btn = document.getElementById("backToTop");
    if (document.body.scrollTop > 200 || document.documentElement.scrollTop > 300) {
      btn.style.display = "block";
    } else {
      btn.style.display = "none";
    }
  };

  // 点击按钮返回顶部
  document.getElementById("backToTop").onclick = function() {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  };
  </script>
  
</body>
</html>
